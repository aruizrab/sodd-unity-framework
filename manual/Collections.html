<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Scriptable Collections | SODD Framework | 3.5.1 </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Scriptable Collections | SODD Framework | 3.5.1 ">
      
      
      <link rel="icon" href="../manual/images/favicon.png">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      <meta name="docfx:disablenewtab" content="true">
      
      <meta name="docfx:docurl" content="https://github.com/aruizrab/sodd-unity-framework/blob/main/Documentation~/manual/Collections.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../manual/images/logo.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="scriptable-collections">Scriptable Collections</h1>

<h2 id="concept">Concept</h2>
<p>At its core, a Scriptable Collection is a Scriptable Object employed to maintain a dynamic list of items or objects
during the game's runtime. This list can be constantly updated, with items being added or removed as the game
progresses. The key feature of Scriptable Collection is their ability to function as central repositories for specific
types of objects, such as enemies, collectible items, or interactive game elements.</p>
<h2 id="how-it-works">How It Works</h2>
<ul>
<li><strong>Collection Creation</strong>: A Scriptable Collection is created as a ScriptableObject, maintaining a list of specific
types of objects. There are two ways to create these collections:
<ul>
<li>From the <strong>Create menu</strong>: Right-click in the Project window, navigate to <code>Create &gt; SODD &gt; Collections</code>, and select
the
desired event type (e.g., <code>GameObjectCollection</code>).</li>
<li>From the <strong>SODD menu</strong>: In the main menu, go to <code>Tools &gt; SODD &gt; Colelctions</code>, and choose the desired collection
type from
the provided options.</li>
</ul>
</li>
<li><strong>Collection Management</strong>: Items can be dynamically added to or removed from the collection during runtime.</li>
<li><strong>Inspector Integration</strong>: The current state of the collection can be viewed and modified directly in the Unity
Inspector, aiding in debugging and testing.</li>
<li><strong>Listeners</strong>: Scriptable Collections provide events that are triggered when items are added or removed,
allowing other components to react to these changes.</li>
<li><strong>Persistence</strong>: Collections maintain their state across different scenes within the editor. However, they reset to
their initial state when the game is restarted in a build.</li>
</ul>
<h2 id="implementations-in-the-framework">Implementations in the Framework</h2>
<p>The SODD Framework offers several implementations of Scriptable Collections to cover various use cases. Below is a table
detailing the core collection types included in the framework:</p>
<table>
<thead>
<tr>
<th><strong>Collection Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>GameObject Collection</strong></td>
<td>A collection that holds references to GameObjects.</td>
</tr>
<tr>
<td><strong>Transform Collection</strong></td>
<td>A collection that holds references to Transforms.</td>
</tr>
<tr>
<td><strong>String Collection</strong></td>
<td>A collection that holds a set of strings.</td>
</tr>
<tr>
<td><strong>Int Collection</strong></td>
<td>A collection that holds a set of integers.</td>
</tr>
<tr>
<td><strong>Float Collection</strong></td>
<td>A collection that holds a set of floats.</td>
</tr>
<tr>
<td><strong>Vector2 Collection</strong></td>
<td>A collection that holds a set of Vector2s.</td>
</tr>
<tr>
<td><strong>Vector3 Collection</strong></td>
<td>A collection that holds a set of Vector3s.</td>
</tr>
</tbody>
</table>
<h2 id="practical-example">Practical Example</h2>
<p>To illustrate the functionality of Scriptable Collections, let's explore a practical use case termed &quot;lock and key.&quot;
This scenario involves a door that can only be unlocked by the player using a specific key. The level may contain
multiple doors and keys, but each door requires a distinct key to unlock.</p>
<h3 id="step-1-creating-the-player-inventory-collection">Step 1: Creating the Player Inventory Collection</h3>
<p>First, we need to create a GameObject Collection named &quot;Player Inventory&quot; to represent the player's inventory throughout
the level.</p>
<ol>
<li>Right-click in the Project window of Unity.</li>
<li>Navigate to <code>Create &gt; SODD &gt; Collections &gt; GameObject</code>.</li>
<li>Name the newly created collection <code>PlayerInventory</code>.</li>
</ol>
<p>This collection will now be used to manage the player's inventory items.</p>
<h3 id="step-2-adding-keys-to-the-inventory">Step 2: Adding Keys to the Inventory</h3>
<p>Keys are represented by GameObjects equipped with scripts that, upon collision with the player, add themselves to the &quot;
Player Inventory&quot; collection.</p>
<p>Here’s the code for the <code>Key</code> script:</p>
<pre><code class="lang-csharp">using UnityEngine;

public class Key : MonoBehaviour
{
    public GameObjectCollection playerInventory;

    private void OnTriggerEnter(Collider other)
    {
        if (other.CompareTag(&quot;Player&quot;))
        {
            playerInventory.Add(gameObject);
            gameObject.SetActive(false); // Optionally deactivate the key GameObject
        }
    }
}
</code></pre>
<ol>
<li>Attach the <code>Key</code> script to key GameObjects in the scene.</li>
<li>Assign the <code>PlayerInventory</code> collection to the <code>playerInventory</code> field in the Key script.</li>
</ol>
<h3 id="step-3-unlocking-doors">Step 3: Unlocking Doors</h3>
<p>Each door is a GameObject with a script that references the inventory and the specific key required for unlocking. When
the player collides with a door, the script checks if the required key is present in the player's inventory.</p>
<p>Here’s the code for the <code>Door</code> script:</p>
<pre><code class="lang-csharp">using UnityEngine;
using SODD.Collections;

public class Door : MonoBehaviour
{
    public Collection&lt;GameObject&gt; playerInventory;
    public GameObject requiredKey;

    private void OnTriggerEnter(Collider other)
    {
        if (other.CompareTag(&quot;Player&quot;) &amp;&amp; playerInventory.Contains(requiredKey))
        {
            UnlockDoor();
        }
    }

    private void UnlockDoor()
    {
        Debug.Log(&quot;Door unlocked&quot;);
    }
}
</code></pre>
<ol>
<li>Attach the <code>Door</code> script to door GameObjects in the scene.</li>
<li>Assign the <code>PlayerInventory</code> collection to the <code>playerInventory</code> field in the Door script.</li>
<li>Assign the specific key GameObject to the <code>requiredKey</code> field in the Door script.</li>
</ol>
<h3 id="step-4-displaying-key-count">Step 4: Displaying Key Count</h3>
<p>An additional script can be implemented to display the number of keys in the player's inventory on a UI element. This
script responds to the addition and removal events in the collection by updating a counter accordingly.</p>
<p>Here’s the code for the KeyCountDisplay script:</p>
<pre><code class="lang-csharp">using UnityEngine;
using TMPro;
using SODD.Collections;

public class KeyCountDisplay : MonoBehaviour
{
    public Collection&lt;GameObject&gt; playerInventory;
    public TMP_Text keyCountText;

    private void OnEnable()
    {
        playerInventory.OnItemAdded += UpdateKeyCount;
        playerInventory.OnItemRemoved += UpdateKeyCount;
        UpdateKeyCount();
    }

    private void OnDisable()
    {
        playerInventory.OnItemAdded -= UpdateKeyCount;
        playerInventory.OnItemRemoved -= UpdateKeyCount;
    }

    private void UpdateKeyCount()
    {
        keyCountText.text = playerInventory.Count.ToString();
    }
}
</code></pre>
<ol>
<li>Attach the <code>KeyCountDisplay</code> script to a UI GameObject.</li>
<li>Assign the <code>PlayerInventory</code> collection to the <code>playerInventory</code> field in the <code>KeyCountDisplay</code> script.</li>
<li>Assign a <code>TMP_Text</code> component to the <code>keyCountText</code> field in the <code>KeyCountDisplay</code> script.</li>
</ol>
<h3 id="step-5-testing-the-setup">Step 5: Testing the Setup</h3>
<p>Now, let's test the setup to ensure everything works as expected.</p>
<ol>
<li>Run the game in the Unity Editor.</li>
<li>When the player collides with a key, the key is added to the inventory, and the key count display updates.</li>
<li>When the player collides with a door, the script checks for the required key in the inventory and unlocks the door if
the key is present.</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>This example highlights the benefits of utilizing Scriptable Collections, as it demonstrates how different systems can
interact with and modify a shared collection in a manner that is both decoupled and efficient. The PlayerInventory
collection acts as a central repository for keys, allowing the Key, Door, and KeyCountDisplay scripts to interact with
it independently.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/aruizrab/sodd-unity-framework/blob/main/Documentation~/manual/Collections.md/#L1" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made by <a href="https://github.com/aruizrab" target="_blank">aruizrab</a> using <a href="https://dotnet.github.io/docfx" target="_blank">DocFX</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
